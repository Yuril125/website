<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Logarithmic Years</title>
        <style id="main-styles">
            body {
                background-color: #ffffff;
                color: #000000;
                transition: background-color 0.3s, color 0.3s;
            }

            #root {
                margin: 0 auto;
                max-width: 800px;
                padding: 20px;
            }

            tr:nth-child(even), th {
                background-color: #eee;
            }

            a {
                color: #0066cc;
            }

            a:visited {
                color: #551a8b;
            }

            @media (prefers-color-scheme: dark) {
                body {
                    background-color: #1a1a1a;
                    color: #e4e4e4;
                }

                a {
                    color: #6eb3ff;
                }

                a:visited {
                    color: #c98fff;
                }

                tr:nth-child(even), th {
                    background-color: #2a2a2a;
                }
            }

            #css-editor-container {
                position: fixed;
                top: 10px;
                right: 10px;
                z-index: 1000;
            }

            #toggle-editor {
                padding: 10px 15px;
                background: #333;
                color: #fff;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-family: monospace;
            }

            #toggle-editor:hover {
                background: #555;
            }

            #css-editor-panel {
                display: none;
                position: fixed;
                top: 60px;
                right: 10px;
                width: 400px;
                max-height: 500px;
                background: #1e1e1e;
                border: 1px solid #333;
                border-radius: 4px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            }

            #css-editor-panel.visible {
                display: flex;
                flex-direction: column;
            }

            #css-editor-header {
                padding: 10px;
                background: #2d2d2d;
                border-bottom: 1px solid #333;
                color: #fff;
                font-family: monospace;
                font-weight: bold;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            #editor-buttons {
                display: flex;
                gap: 5px;
            }

            #save-css,
            #reset-css {
                padding: 5px 10px;
                color: #fff;
                border: none;
                border-radius: 3px;
                cursor: pointer;
                font-family: monospace;
                font-size: 12px;
            }

            #save-css {
                background: #2563eb;
            }

            #save-css:hover {
                background: #1d4ed8;
            }

            #save-css.saved {
                background: #16a34a;
            }

            #reset-css {
                background: #dc2626;
            }

            #reset-css:hover {
                background: #b91c1c;
            }

            #css-editor {
                width: 100%;
                height: 400px;
                padding: 10px;
                background: #1e1e1e;
                color: #d4d4d4;
                border: none;
                font-family: monospace;
                font-size: 14px;
                resize: vertical;
            }

            #css-editor:focus {
                outline: none;
            }
        </style>
        <link rel="icon" type="image/x-icon" href="/img/favicon.png" />
    </head>

    <body>
        <div id="css-editor-container">
            <button id="toggle-editor">Edit CSS</button>
            <div id="css-editor-panel">
                <div id="css-editor-header">
                    <span>CSS Editor (Live Preview)</span>
                    <div id="editor-buttons">
                        <button id="save-css">Save CSS</button>
                        <button id="reset-css">Reset</button>
                    </div>
                </div>
                <textarea id="css-editor"></textarea>
            </div>
        </div>
        <div id="root">
            <nav><a href=".">&LongLeftArrow; Back to blog homepage</a></nav>
<main>
    <h1>Logarithmic Years</h1>
    <p>
        Humans tend to perceive differences logarithmically. The difference
        between the amount of light from one lightbulb compared to two appears
        much greater than between ninety-nine lightbulbs compared to a hundred,
        even though the absolute difference in brightness is the same.
        Especially when quantities span many orders of magnitude, scientists and
        engineers often express quantities as a <em>logarithm</em> of the actual
        physical quantity.
    </p>
    <p>
        A familiar example of a logarithmic unit is the decibel, commonly used
        to measure the loudness of sound. It is found by taking the base-10
        logarithm of a quantity, then multiplying by 10. Thus, compared to a 50
        dB noise, a 53 dB noise is approximately twice as loud, and a 60 dB
        noise is ten times as loud.
    </p>
    <p>
        Age is an example of a quantity which we often perceive logarithmically.
        Time appears to pass more quickly as we age, and the difference in
        maturity and development between a 14 years of age and a 18 years of age
        is much greater than the difference between a 34 years of age and a 38
        years of age, despite both having a 4-year span. Although human age does
        not span multiple orders of magnitude, it might be useful to measure age
        logarithmically as an interesting exercise in how we perceive time.
    </p>
    <p>
        One method of doing this could be to take the base-10 logarithm of your
        age in years, multiply by 10, then optionally round to the nearest
        integer. We can call this &ldquo;decibel-years&rdquo;, or dbY.
    </p>
    <h2>Observations</h2>
    <p>
        The useful range of dbY appears to be around from 0 dbY (~1 year) to 20
        dbY (~100 years).
    </p>

    <style>
        @scope {
            td {
                min-width: 50px;
                text-align: center;
            }
            table {
                margin-left: auto;
                margin-right: auto;
            }
            caption {
                caption-side: bottom;
            }
            figcaption {
                margin-left: auto;
                margin-right: auto;
                text-align: center;
                font-style: italic;
                max-width: 600px;
            }
        }
    </style>
    <figure>
        <table>
            <thead>
                <tr>
                    <th>dbY</th>
                    <th>Age</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>10</td>
                    <td>8</td>
                </tr>
                <tr>
                    <td>11</td>
                    <td>11</td>
                </tr>
                <tr>
                    <td>12</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>13</td>
                    <td>18</td>
                </tr>
                <tr>
                    <td>14</td>
                    <td>22</td>
                </tr>
                <tr>
                    <td>15</td>
                    <td>28</td>
                </tr>
                <tr>
                    <td>16</td>
                    <td>35</td>
                </tr>
                <tr>
                    <td>17</td>
                    <td>45</td>
                </tr>
                <tr>
                    <td>18</td>
                    <td>56</td>
                </tr>
                <tr>
                    <td>19</td>
                    <td>71</td>
                </tr>
                <tr>
                    <td>20</td>
                    <td>89</td>
                </tr>
                <tr>
                    <td>21</td>
                    <td>112</td>
                </tr>
            </tbody>
        </table>
        <figcaption>
            Table mapping 10&ndash;21 dbY to years.<br />The year shown on the
            right is the approximately the earliest age at which one's dbY,
            rounded to the nearest integer, would be the dbY on the left.
        </figcaption>
    </figure>
    <p>
        The integer dbYs correspond pretty well to age groups. In the United
        States, 11 dbY (11&ndash;14 years) are middle schoolers, 12 dbY
        (14&ndash;18 years) are high schoolers, and 13 dbY (18&ndash;22 years)
        are college students; 14 dbY is roughly the &ldquo;twenties&rdquo;, and
        the remaining age groups seem pretty reasonable as well.
    </p>
    <p>
        Taking the difference of ages in dbY rather than years also seems to
        allow for better comparisons between ages. For instance, the difference
        between an 18 years of age and a 14 years of age would be 1.09 dbY, and
        the difference between a 38 years of age and a 34 years of age would be
        0.48 dbY, showing there is indeed more of a difference in the former
        than the latter.
    </p>
    <h2>Appendix: Calculators</h2>
    <p>
        Below are a few calculators you can use to play around with dbY. All
        processing is done in JavaScript on your machine; no data leaves your
        device.
    </p>
    <p>Calculate your age in dbY:</p>
    <div
        style="
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            border-style: solid;
        "
    >
        <div>
            <input
                type="radio"
                id="useBirthday"
                name="inputMethod"
                value="birthday"
                checked
                onchange="toggleInputMethod()"
            />
            <label for="useBirthday">Enter birthday:</label>
            <input type="date" id="birthday" />
        </div>
        <div style="margin-top: 10px">
            <input
                type="radio"
                id="useAge"
                name="inputMethod"
                value="age"
                onchange="toggleInputMethod()"
            />
            <label for="useAge">Enter age in years:</label>
            <input type="number" id="ageYears" min="0" step="1" disabled />
        </div>
        <button onclick="calculateDbY()">Calculate</button>
        <br />
        <span id="result" style="margin-top: 10px; font-weight: bold"></span>
    </div>
    <script>
        function toggleInputMethod() {
            const useBirthday = document.getElementById("useBirthday").checked;
            const birthdayInput = document.getElementById("birthday");
            const ageYearsInput = document.getElementById("ageYears");

            if (useBirthday) {
                birthdayInput.disabled = false;
                ageYearsInput.disabled = true;
                ageYearsInput.value = "";
            } else {
                birthdayInput.disabled = true;
                ageYearsInput.disabled = false;
                birthdayInput.value = "";
            }
        }

        function calculateDbY() {
            const useBirthday = document.getElementById("useBirthday").checked;
            let ageInYears;

            if (useBirthday) {
                const birthday = document.getElementById("birthday").value;
                if (!birthday) {
                    document.getElementById("result").textContent =
                        "Please enter your birthday.";
                    return;
                }
                const birthDate = new Date(birthday);
                const today = new Date();
                const ageInMs = today - birthDate;
                ageInYears = ageInMs / (1000 * 60 * 60 * 24 * 365.25);

                if (ageInYears < 0) {
                    document.getElementById("result").textContent =
                        "Please enter a valid birthday in the past.";
                    return;
                }
            } else {
                const ageYearsInput = document.getElementById("ageYears").value;
                if (!ageYearsInput) {
                    document.getElementById("result").textContent =
                        "Please enter your age in years.";
                    return;
                }
                ageInYears = parseFloat(ageYearsInput);
                if (isNaN(ageInYears) || ageInYears <= 0) {
                    document.getElementById("result").textContent =
                        "Please enter a valid positive age.";
                    return;
                }
            }

            const dbY = Math.log10(ageInYears) * 10;
            document.getElementById("result").textContent =
                `Your age: ${ageInYears.toFixed(2)} years → ${dbY.toFixed(2)} dbY (rounds to ${Math.round(dbY)} dbY)`;
        }
    </script>
    <p>Calculate the difference between two ages in dbY:</p>
    <div
        style="
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            border-style: solid;
        "
    >
        <label for="age1">Age 1 (years):</label>
        <input type="number" id="age1" min="0" step="1" />
        <br />
        <label for="age2">Age 2 (years):</label>
        <input type="number" id="age2" min="0" step="1" />
        <br />
        <button onclick="calculateDbYDifference()">Calculate Difference</button>
        <br />
        <span
            id="resultDifference"
            style="margin-top: 10px; font-weight: bold"
        ></span>
    </div>
    <script>
        function calculateDbYDifference() {
            const age1 = parseFloat(document.getElementById("age1").value);
            const age2 = parseFloat(document.getElementById("age2").value);

            if (isNaN(age1) || isNaN(age2)) {
                document.getElementById("resultDifference").textContent =
                    "Please enter both ages.";
                return;
            }

            if (age1 <= 0 || age2 <= 0) {
                document.getElementById("resultDifference").textContent =
                    "Please enter positive ages.";
                return;
            }

            const dbY1 = Math.log10(age1) * 10;
            const dbY2 = Math.log10(age2) * 10;
            const difference = Math.abs(dbY2 - dbY1);

            document.getElementById("resultDifference").textContent =
                `${age1} years = ${dbY1.toFixed(2)} dbY, ${age2} years = ${dbY2.toFixed(2)} dbY → Difference: ${difference.toFixed(2)} dbY`;
        }
    </script>
</main>

        </div>

        <script>
            const toggleButton = document.getElementById('toggle-editor');
            const saveButton = document.getElementById('save-css');
            const resetButton = document.getElementById('reset-css');
            const editorPanel = document.getElementById('css-editor-panel');
            const cssEditor = document.getElementById('css-editor');
            const mainStyles = document.getElementById('main-styles');

            // Get current CSS content and normalize indentation
            const originalCSS = mainStyles.textContent;
            const lines = originalCSS.split('\n');
            const minIndent = lines
                .filter(line => line.trim().length > 0)
                .map(line => line.match(/^(\s*)/)[0].length)
                .reduce((min, indent) => Math.min(min, indent), Infinity);
            const normalizedOriginalCSS = lines
                .map(line => line.substring(minIndent))
                .join('\n')
                .trim();

            // Load saved CSS from localStorage or use original
            const savedCSS = localStorage.getItem('customCSS');
            if (savedCSS) {
                mainStyles.textContent = savedCSS;
                cssEditor.value = savedCSS;
            } else {
                cssEditor.value = normalizedOriginalCSS;
            }

            // Toggle editor panel
            toggleButton.addEventListener('click', () => {
                editorPanel.classList.toggle('visible');
                if (editorPanel.classList.contains('visible')) {
                    toggleButton.textContent = 'Hide CSS Editor';
                } else {
                    toggleButton.textContent = 'Edit CSS';
                }
            });

            // Live CSS update
            cssEditor.addEventListener('input', () => {
                mainStyles.textContent = cssEditor.value;
                // Reset save button state
                saveButton.textContent = 'Save CSS';
                saveButton.classList.remove('saved');
            });

            // Save CSS to localStorage
            saveButton.addEventListener('click', () => {
                localStorage.setItem('customCSS', cssEditor.value);
                saveButton.textContent = 'Saved!';
                saveButton.classList.add('saved');
                setTimeout(() => {
                    saveButton.textContent = 'Save CSS';
                    saveButton.classList.remove('saved');
                }, 2000);
            });

            // Reset CSS to original
            resetButton.addEventListener('click', () => {
                if (confirm('Reset CSS to original? This will remove your saved custom CSS.')) {
                    localStorage.removeItem('customCSS');
                    cssEditor.value = normalizedOriginalCSS;
                    mainStyles.textContent = originalCSS;
                    saveButton.textContent = 'Save CSS';
                    saveButton.classList.remove('saved');
                }
            });

            // Prevent textarea from losing focus on tab
            cssEditor.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = cssEditor.selectionStart;
                    const end = cssEditor.selectionEnd;
                    cssEditor.value = cssEditor.value.substring(0, start) + '    ' + cssEditor.value.substring(end);
                    cssEditor.selectionStart = cssEditor.selectionEnd = start + 4;
                }
            });
        </script>
    </body>
</html>
